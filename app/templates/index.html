{% extends "base.html" %}

{% block content %}
<script>
    var userTaskList = [];
    var getTasksUrl = "{{ url_for('getTasks') }}";
    var deleteTasksUrl = "{{ url_for('delete') }}";
    var editTasksUrl = "{{ url_for('edit') }}";
</script>
<div id="vue-div">
    <div class="greet">
        <h1>Hi, {{ current_user.username }}!</h1>
    </div>
    <div id="taskForm">
        {% if form %}
        <form action="" method="post">
            {{ form.hidden_tag() }}
            <p>
                {{ form.task.label }}<br>
                {{ form.task(cols=64, rows=3) }}<br>
                {% for error in form.task.errors %}
                <span style="color: red;">[{{ error }}]</span>
                {% endfor %}
            </p>
            <p>{{ form.submit() }}</p>
        </form>
        {% endif %}
    </div>
    <table id="user_taskList">
        <tr>
            <th>Task</th>
            <th>Edit</th>
            <th>Delete</th>
        </tr>
        <tr v-for="task in tasks" :key="task.id" :id="task.id">
            <td :id="'taskBody_' + task.id" :load="log(task)">
                <b>  <% task.data %>  </b>
            </td>
            <!-- 
            <td id="'taskEditButton_' + id">
                <i id="'editButton_' + id" v-if="isEditing" class="fas fa-edit editButton"
                    v-on:mouseover='taskMouseover(id)' v-on:click='editTask(id)'></i>
            </td>
            <td id="'taskEditButton_' + id">
                    <i id="'editButton_' + id" v-if="!isEditing" class="fas fa-edit editButton"
                        v-on:mouseover='taskMouseover(id)' v-on:click='editTask(id)'></i>
            </td> -->

            <td :id="'taskEditButton_' + task.id">
                <button :id="'editButton_' + task.id" class="editButton"
                    v-on:click='editTask(task.id)'>Edit</button>
            </td>
            <td :id="'taskDeleteButton_' + task.id">
                <button :id="'deleteButton_' + task.id" class="deleteButton"
                    v-on:click='deleteTask(task.id)'>Delete</button>
            </td>
        </tr>
    </table>
</div>
<script src="/static/scripts.js" charset="utf-8"></script>
{% endblock %}