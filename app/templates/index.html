{% extends "base.html" %}

{% block content %}
<script>
    var getTasksUrl = "{{ url_for('getTasks') }}";
    var deleteTasksUrl = "{{ url_for('delete') }}";
    var editTasksUrl = "{{ url_for('edit') }}";
    var addTaskUrl = "{{ url_for('add') }}";
</script>
<div id="vue-div">
    <div class="greet">
        <h1>Hi, {{ current_user.username }}!</h1>
    </div>
    <div id="taskForm">
        <textarea v-model="newTask" placeholder="Hit the books!"></textarea>
        <button v-on:click="addTask(newTask)"><span><i class="fas fa-arrow-right"></i></span></button>
    </div>
    <table id="user_taskList">
        <tr>
            <th>Task</th>
            <th>Edit</th>
            <th>Delete</th>
        </tr>
        <tr v-for="(task, index) in tasks" :key="task.id" :id="task.id">
            <td v-if="task.isEditing">
                <textarea v-model="task.data" rows="4" columns="128"></textarea>
                <!--<button v-on:click="editTask(task)">Done</button> -->
            </td>
            <!-- For logging use -> " -->
            <td v-if="!task.isEditing" :id="'taskBody_' + task.id" :load="log(task)">
                <b>  <% task.data %>  </b>
            </td>
            <td id="'taskEditButton_' + task.id" class="buttonCell" v-if="task.editIsFocus">
                <i id="'editButton_' + task.id"  class="fas fa-edit"
                    v-on:mouseover='taskEditMouseover(task)'
                    v-on:mouseout='taskEditMouseover(task)'
                    v-on:click='editTask(task)'></i>
            </td>
            <td id="'taskEditButton_' + task.id" class="buttonCell" v-if="!task.editIsFocus">
                    <i id="'editButton_' + task.id" class="far fa-edit"
                        v-on:mouseover='taskEditMouseover(task)'
                        v-on:mouseout='taskEditMouseover(task)'
                        v-on:click='editTask(task)'></i>
            </td>

            <td id="'taskDeleteButton_' + task.id" class="buttonCell" v-if="task.deleteIsFocus">
                <i id="'editButton_' + task.id"  class="fas fa-trash-alt"
                    v-on:mouseover='taskDeleteMouseover(task)'
                    v-on:mouseout='taskDeleteMouseover(task)'
                    v-on:click='deleteTask(task.id, index)'></i>
            </td>
            <td id="'taskDeleteButton_' + task.id" class="buttonCell" v-if="!task.deleteIsFocus">
                    <i id="'editButton_' + task.id" class="far fa-trash-alt"
                        v-on:mouseover='taskDeleteMouseover(task)'
                        v-on:mouseout='taskDeleteMouseover(task)'
                        v-on:click='deleteTask(task.id, index)'></i>
            </td>
        </tr>
    </table>
</div>
<script src="/static/scripts.js" charset="utf-8"></script>
{% endblock %}
