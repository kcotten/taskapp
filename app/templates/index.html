{% extends "base.html" %}

{% block content %}
<script>
    var userTaskList = [];
    var getTasksUrl  = "{{ url_for('getTasks') }}";
</script>
<div id="vue-div">
    <div class="greet">
        <h1>Hi, {{ current_user.username }}!</h1>
    </div>
    <table id="user_tasks">
        <tr>
        <th>
        {% if form %}
        <form action="" method="post">
            {{ form.hidden_tag() }}
            <p>
                {{ form.task.label }}<br>
                {{ form.task(cols=64, rows=2) }}<br>
                {% for error in form.task.errors %}
                <span style="color: red;">[{{ error }}]</span>
                {% endfor %}
            </p>
            <p>{{ form.submit() }}</p>
        </form>
        {% endif %}
        </th>
        </tr>
        {% for task in tasks %}
            <tr id="user_task">
            <th>
                <b>{{ task.body }}</b>
            </th>
            <th>
                <button id="editButton" v-on:click="editTask()">Edit</button>
            </th>
            <th>
                <button id="deleteButton" v-on:click="deleteTask()">Delete</button>
            </th>
            </tr>
            <!-- <script>
                userTaskList.push("{{ task.body }}");
            </script> -->
        {% endfor %}
    </table>
    <!-- <a href="{{ url_for('delete') }}">{{ url_for('delete') }}</a> -->
    <!-- <script>
        window.onload = function() {
            taskCollector(userTaskList);
        }
    </script> -->
</div>
<script src="/static/scripts.js" charset="utf-8"></script>
{% endblock %}
